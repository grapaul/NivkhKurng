# NivkhKurng

#### Прототип нивхского корпуса 
#### Поисковый алгоритм взят от [RuConst](https://github.com/grapaul/Ru_Const) и на данный момент дополняется новым функционалом
#### Активные участники: [Даша Савина](https://github.com/lunadunkel), [Эля Измайлова](https://github.com/el-izm), [Ева Гогуа](https://github.com/evagogua) при участии [Сергея Шевелева](https://github.com/BlueDanube7)
#### Ниже инструкция по пользованию, более подробно про синтаксис - см. [RuConst](https://github.com/grapaul/Ru_Const); синтаксической разметки в NivkhKurng нет (**NB**)



### Копирование поискового скрипта и датасета с корпусом

1. Скачиваем архив или клонируем данный репозиторий - он содержит поисковые скрипты и примеры правил

2. Загружаем и распаковываем в папку с файлом EX_tractor_N.N.py (текущая версия - EX_tractor_1.4.py) архив; нивхские данные копируются вместе с репозиторием (**NB**)

### Настройка скрипта для извлечения примеров (Ex_Extractor):

### Запуск

Из корневой папки с файлом EX_tractor_N.N.py
```
python EX_tractor_1.4.py
```

В поисковом запросе можно задавать параметры. Параметры задают место расположения правил (--rules по умолчанию: Rules/23), директорию с текущими примера в формате json (--dir_in, по умолчанию: Input/main), файл с текстовым результатом (--output_txt, по умолчанию: Output/search_result.txt), файл с результатом в csv (--output_csv, по умолчанию: Output/search_result.csv), выдачу текстового (--verbosity) и csv (--csv_verbosity) файлов (по умолчанию оба 1)
```
usage: EX_tractor_1.4.py [-h] [--rules RULES] [--dir_in DIR_IN] [--output_txt OUTPUT_TXT]
                           [--verbosity VERBOSITY] [--output_csv OUTPUT_CSV]
                           [--csv_verbosity CSV_VERBOSITY]
```
**NB** Для того, чтобы данные в таблицах csv можно было фильтровать, правила для некоторого запроса на одну и ту же тему должны иметь один и тот же набор обязательных участников! В противном случае данные будут попадать в разные столбцы


#### Пример запуска
```
...#Sandbox% python EX_tractor_1.4.py --dir_in Input_ --rules 25

```
Запуск с поиском по папке Input_ (куда можно положить подкорпус для какого-либо эксперимента), правила будут браться из директории 'Rules/24/' (она же установлена по умолчанию)

```
...#Sandbox% python EX_tractor_1.4.py 

```
Запуск по умолчанию


## Формат и примеры правил:

Правила задаются в .yaml - файлах.
См. примеры на отдельные запросы в папке ```Rules```

### Файл с правилами имеет структуру:  

```
ExampleName: Coord_SG_post
Priority: 1
SubExamples
Name: Rule1
Participants:
  - Obligatory: <List>
  - Optional: <List>
..  
Name: Rule2  
```

Правила для одних и тех же типов примеров располагаются внутри одной и той же секции.  
Структура примера, т.е. наличие у него определенных участников, их название и обязательность/факультативность -- задаются на уровне SubExamples.  

Отдельные ExampleName лучше заводить в отдельных файлах. При этом файлов для поиска может быть более одного.

### Синтаксис правил:  

```
ExampleName: MyExample
SubExamples:
Name: MySubExample
Participants:  
  - Obligatory: Ob1, Ob2, ...  
  - Optional: Op1, Op2, ...  
Items:
  - A: ItemName/Dummy
    (Restriction1)
    (Restriction2) ...  
  - B: ItemName/Dummy
    (Restriction1)
    (Restriction2) ...  
  ...  
Constraints:
    - Order: B, A
...
```

В каждом правиле должен быть как минимум один обязательный элемент.  


#### Синтаксис ограничений на элементы примеров (Restriction)


**Morph**: Граммемы в нотации [UD](https://universaldependencies.org/cop/morphology.html), [more](https://universaldependencies.org/u/feat/all.html).  
Все значения пишутся после названия категории и знака "=", без пробелов (например, Variant=Short - для краткой формы прилагательного). Частеречные теги пишутся капслоком отдельно ('VERB'; NB: бытийная связка - AUX).
Кроме этого добавлена информация о переходности, она также задается при поиске отдельно ('tran', 'intran')

**Lex**: нормальная форма, являющаяся вершиной (таких большинство, is_head	true).  

**LexNonHead**: нормальная форма словоформы, не являющейся вершиной (is_head	false). Метка такого лексического ограничения используется всегда, когда словоформа не является ничьей вершиной

**List**: список нормальных форм, выделенный в отдельный файл (лексикон), имя в квадратных скобках совпадает с именем файла типа *.txt - без расширения (NB)

**|** -- логическое "или"
**NOT=>** -- логическое "нет", пока реализовано только для морфологии

Примеры:

```
Lex: мочь|смочь
```

```
Morph: NOT => Case=Nom
```

 telegram - @PavelGras



